<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Apex TTK Vergleich â€“ Full Mag Edition</title>
<style>
 body{background:#121212;color:#fff;font-family:Arial;padding:20px;}
 h1{text-align:center;margin-bottom:20px;}
 .container{display:flex;flex-wrap:wrap;gap:20px;justify-content:center;}
 .weapon{flex:1 1 320px;background:#1e1e1e;padding:15px;border-radius:8px;}
 label{display:block;margin:8px 0 4px;}
 input,select{width:100%;padding:7px;border:none;border-radius:5px;}
 button{margin:20px auto;display:block;padding:10px;width:200px;background:#e53935;color:#fff;border:none;border-radius:5px;cursor:pointer;}
 .result{margin-top:15px;background:#2c2c2c;padding:10px;border-radius:5px;}
 .better{color:#00e676;font-weight:bold;}
 .worse{color:#ff1744;font-weight:bold;}
 .note{font-size:0.9em;color:#ffb300;margin-top:5px;}
 .killok{color:#00e676;font-weight:bold;}
 .killno{color:#ff1744;font-weight:bold;}
 .back-btn {display:inline-block;margin-bottom:15px;padding:8px 12px;background:#e53935;color:white;text-decoration:none;border-radius:5px;font-weight:bold;}
 .back-btn:hover {background:#d32f2f;}
</style>
</head>
<body>

<a href="index.html" class="back-btn">â¬… ZurÃ¼ck zum Dashboard</a>

<h1>ðŸ”« Apex TTKâ€‘Vergleich â€“ Full Mag Edition</h1>

<div class="container">
 <div class="weapon"><h2>Waffe 1</h2>
  <label>Waffe:</label>
  <select id="w1" onchange="updateWeapon('1')"></select>
  
  <label>Magazin:</label>
  <select id="mag1" onchange="updateMag('1')">
    <option value="base">Base</option>
    <option value="white" selected>White</option>
    <option value="blue">Blue</option>
    <option value="purple">Purple</option>
  </select>

  <label>Body Schaden:</label><input id="body1" type="number" readonly>
  <label>Head Schaden:</label><input id="head1" type="number" readonly>
  <label>Feuerrate (Schuss/s):</label><input id="rate1" type="number">
  <label>Headshotâ€‘Anteil (%):</label><input id="hs1" type="number" value="0">
  <label>Trefferquote (%):</label><input id="acc1" type="number" value="100">
  <label>Zielâ€‘HP:</label><input id="hp1" type="number" value="200">
  <div class="result" id="out1">...</div>
  <div class="note" id="note1"></div>
 </div>

 <div class="weapon"><h2>Waffe 2</h2>
  <label>Waffe:</label>
  <select id="w2" onchange="updateWeapon('2')"></select>
  
  <label>Magazin:</label>
  <select id="mag2" onchange="updateMag('2')">
    <option value="base">Base</option>
    <option value="white" selected>White</option>
    <option value="blue">Blue</option>
    <option value="purple">Purple</option>
  </select>

  <label>Body Schaden:</label><input id="body2" type="number" readonly>
  <label>Head Schaden:</label><input id="head2" type="number" readonly>
  <label>Feuerrate (Schuss/s):</label><input id="rate2" type="number">
  <label>Headshotâ€‘Anteil (%):</label><input id="hs2" type="number" value="0">
  <label>Trefferquote (%):</label><input id="acc2" type="number" value="100">
  <label>Zielâ€‘HP:</label><input id="hp2" type="number" value="200">
  <div class="result" id="out2">...</div>
  <div class="note" id="note2"></div>
 </div>
</div>

<button onclick="calc()">Berechnen</button>

<script>
const weapons = {
 "Havoc":{body:19,head:25,rate:10,spin:true,mag:{base:18,white:24,blue:28,purple:32}},
 "Flatline":{body:19,head:25,rate:10,spin:false,mag:{base:20,white:23,blue:27,purple:30}},
 "Hemlok":{body:20,head:28,rate:9,spin:false,mag:{base:18,white:21,blue:24,purple:30}},
 "R-301":{body:14,head:18,rate:13.5,spin:false,mag:{base:21,white:23,blue:28,purple:31}},
 "Nemesis":{body:17,head:22,rate:10.6,spin:false,mag:{base:20,white:24,blue:28,purple:32}},
 "Alternator":{body:18,head:22,rate:10,spin:false,mag:{base:19,white:23,blue:26,purple:28}},
 "Prowler":{body:16,head:20,rate:11,spin:false,mag:{base:20,white:23,blue:26,purple:35}},
 "R-99":{body:10,head:15,rate:18,spin:false,mag:{base:17,white:20,blue:23,purple:27}},
 "Volt":{body:16,head:19,rate:12,spin:false,mag:{base:19,white:21,blue:23,purple:26}},
 "C.A.R.":{body:14,head:17,rate:15,spin:false,mag:{base:19,white:22,blue:24,purple:27}},
 "Devotion":{body:16,head:20,rate:12,spin:true,mag:{base:36,white:40,blue:44,purple:48}},
 "L-STAR":{body:20,head:25,rate:10,spin:false,mag:{base:24,white:27,blue:30,purple:34}},
 "Spitfire":{body:21,head:26,rate:9,spin:false,mag:{base:35,white:40,blue:45,purple:50}},
 "Rampage":{body:30,head:38,rate:7,spin:false,mag:{base:28,white:28,blue:32,purple:40}},
 "G7 Scout":{body:35,head:56,rate:4.5,spin:false,mag:{base:10,white:12,blue:15,purple:20}},
 "30-30 Repeater":{body:43,head:69,rate:2.3,spin:false,mag:{base:6,white:8,blue:10,purple:12}},
 "Bocek":{body:55,head:120,rate:1,spin:false,mag:{base:1,white:1,blue:1,purple:1}},
 "Charge Rifle":{body:75,head:135,rate:0.5,spin:false,mag:{base:4,white:5,blue:6,purple:8}},
 "Longbow":{body:55,head:108,rate:1.3,spin:false,mag:{base:6,white:8,blue:10,purple:12}},
 "Sentinel":{body:70,head:126,rate:0.9,spin:false,mag:{base:4,white:5,blue:6,purple:7}},
 "Kraber":{body:150,head:210,rate:0.5,spin:false,mag:{base:4,white:4,blue:4,purple:4}},
 "RE-45":{body:15,head:19,rate:13,spin:false,mag:{base:18,white:21,blue:24,purple:27}},
 "P2020 (S23 Werte)":{body:24,head:30,rate:7,spin:false,mag:{base:10,white:12,blue:14,purple:16}},
 "Akimbo P2020 (S23 Werte)":{body:24,head:30,rate:14,spin:false,mag:{base:10,white:12,blue:14,purple:16}},
 "Wingman":{body:48,head:72,rate:2.6,spin:false,mag:{base:6,white:8,blue:9,purple:11}},
 "Triple Take":{body:69,head:111,rate:1.2,spin:false,mag:{base:5,white:6,blue:7,purple:9}},
 "EVA-8":{body:48,head:48,rate:2,spin:false,mag:{base:6,white:8,blue:8,purple:8}},
 "Mastiff (S23 Werte)":{body:90,head:90,rate:1.1,spin:false,mag:{base:4,white:6,blue:6,purple:6}},
 "Mozambique (S23 Werte)":{body:45,head:60,rate:2.2,spin:false,mag:{base:4,white:6,blue:6,purple:6}},
 "Akimbo Mozambique (S23 Werte)":{body:45,head:60,rate:2.6,spin:false,mag:{base:4,white:6,blue:6,purple:6}},
 "Peacekeeper (S23 Werte)":{body:99,head:135,rate:1.1,spin:false,mag:{base:5,white:6,blue:6,purple:6}}
};

const magColors={base:"#FFFFFF",white:"#E0E0E0",blue:"#2196F3",purple:"#9C27B0"};

window.onload = function(){
 ['w1','w2'].forEach(id=>{
   let sel=document.getElementById(id);
   Object.keys(weapons).forEach(w=>{
     let opt=document.createElement('option');
     opt.value=w; opt.textContent=w;
     sel.appendChild(opt);
   });
 });
 updateWeapon('1');
 updateWeapon('2');
};

function updateWeapon(num){
 let w=document.getElementById('w'+num).value;
 document.getElementById('body'+num).value=weapons[w].body;
 document.getElementById('head'+num).value=weapons[w].head;
 document.getElementById('rate'+num).value=weapons[w].rate;
 updateMag(num);
 document.getElementById('note'+num).textContent = weapons[w].spin ? "âš  Spinâ€‘Upâ€‘Waffe â€“ voller DPS erst nach Anlauf!" : "";
}

function updateMag(num){
 let w=document.getElementById('w'+num).value;
 let magColor=document.getElementById('mag'+num).value;
 let displayColor = magColors[magColor] || "#FFFFFF";
 let magSize=weapons[w].mag[magColor];
 document.getElementById('note'+num).innerHTML = `<span style="color:${displayColor}">ðŸ“¦ SchÃ¼sse pro Mag (${magColor.toUpperCase()}): ${magSize}</span>`;
}

function calc(){
 let results=[];
 ['1','2'].forEach(i=>{
  let w=document.getElementById('w'+i).value;
  let magColor=document.getElementById('mag'+i).value;
  let rate=+document.getElementById('rate'+i).value;
  let hs=+document.getElementById('hs'+i).value/100;
  let acc=+document.getElementById('acc'+i).value/100;
  let hp=+document.getElementById('hp'+i).value;
  let body=weapons[w].body, head=weapons[w].head;
  let dmg=body*(1-hs)+head*hs;
  let adjDmg=dmg*acc;
  let ttk=(hp/(adjDmg*rate)).toFixed(2);
  let shots=Math.ceil(hp/adjDmg);
  let dps=(dmg*rate).toFixed(1);
  let realDps=(adjDmg*rate).toFixed(1);
  let magSize=weapons[w].mag[magColor];
  let totalMagDamage = (magSize * adjDmg).toFixed(1);
  let killsPossible = Math.floor((magSize * adjDmg) / hp);
  let killCheck = killsPossible >= 1 
      ? `<span class="killok">ðŸŸ¢ Magazin reicht fÃ¼r ${killsPossible} Kill${killsPossible>1?"s":""}</span>` 
      : `<span class="killno">ðŸ”´ Reload nÃ¶tig fÃ¼r 1 Kill</span>`;
  results.push({i,dmg,adjDmg,ttk,shots,dps,realDps,magSize,magColor,killCheck,totalMagDamage});
 });
 const faster = results[0].ttk < results[1].ttk ? 0 : 1;
 ['0','1'].forEach(idx=>{
  let r=results[idx];
  let colorClass=(idx==faster)?"better":"worse";
  document.getElementById('out'+r.i).innerHTML=
    `Effektiv dmg/Bullet: ${r.dmg.toFixed(1)}<br>`+
    `Theoretischer DPS: ${r.dps}<br>`+
    `Real-DPS (mit Trefferquote): ${r.realDps}<br>`+
    `<span style="color:${magColors[r.magColor]}">ðŸ“¦ SchÃ¼sse pro Mag: ${r.magSize}</span><br>`+
    `ðŸ’¥ Schaden pro Mag: <strong>${r.totalMagDamage}</strong><br>`+
    `${r.killCheck}<br>`+
    `TTK: <strong class="${colorClass}">${r.ttk}s</strong><br>`+
    `SchÃ¼sse bis Kill: <strong>${r.shots}</strong>`;
 });
}
</script>

</body>
</html>


