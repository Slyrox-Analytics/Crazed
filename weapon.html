<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weapon Comparison</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: url('Wraith PFP_V4_00000.jpg') no-repeat center center fixed;
    background-size: cover;
    color: white;
    text-align: center;
    margin: 0;
}
.container {
    background: rgba(0,0,0,0.7);
    padding: 20px;
    border-radius: 10px;
    display: inline-block;
    margin-top: 20px;
    max-width: 400px;
}
select, input {
    width: 90%;
    padding: 5px;
    margin: 5px 0;
    border: none;
    border-radius: 5px;
}
.result {
    background: black;
    padding: 10px;
    border-radius: 5px;
    text-align: left;
    margin-top: 10px;
}
.green { color: #00ff00; font-weight: bold; }
.red { color: #ff0000; font-weight: bold; }
</style>
</head>
<body>

<h1>ðŸ”« Weapon Comparison</h1>

<div class="container">
    <h2>Waffe 1</h2>
    <select id="weapon1" onchange="setWeaponStats(1)"></select>
    <label>Magazin:</label>
    <select id="mag1" onchange="updateAll()">
        <option value="White">White</option>
        <option value="Blue">Blue</option>
        <option value="Purple">Purple</option>
    </select>
    <label>Headshot-Anteil (%):</label>
    <input type="number" id="hs1" value="0">
    <label>Trefferquote (%):</label>
    <input type="number" id="acc1" value="100">
    <label>Ziel-HP:</label>
    <input type="number" id="hp1" value="200">
    <div id="result1" class="result"></div>
</div>

<div class="container">
    <h2>Waffe 2</h2>
    <select id="weapon2" onchange="setWeaponStats(2)"></select>
    <label>Magazin:</label>
    <select id="mag2" onchange="updateAll()">
        <option value="White">White</option>
        <option value="Blue">Blue</option>
        <option value="Purple">Purple</option>
    </select>
    <label>Headshot-Anteil (%):</label>
    <input type="number" id="hs2" value="0">
    <label>Trefferquote (%):</label>
    <input type="number" id="acc2" value="100">
    <label>Ziel-HP:</label>
    <input type="number" id="hp2" value="200">
    <div id="result2" class="result"></div>
</div>

<br><br>
<button onclick="updateAll()">Berechnen</button>

<script>
const weapons = {
    "Havoc": { body: 18, head: 27, rpm: 672, mags: {White:24, Blue:28, Purple:32} },
    "Flatline": { body: 18, head: 36, rpm: 600, mags: {White:24, Blue:28, Purple:30} },
    "Hemlok": { body: 20, head: 35, rpm: 384, mags: {White:18, Blue:24, Purple:27} },
    "R-301": { body: 14, head: 25, rpm: 810, mags: {White:18, Blue:20, Purple:25} },
    "Nemesis": { body: 17, head: 26, rpm: 600, mags: {White:20, Blue:24, Purple:28} },
    "Alternator": { body: 16, head: 24, rpm: 600, mags: {White:19, Blue:22, Purple:27} },
    "Prowler": { body: 15, head: 23, rpm: 672, mags: {White:20, Blue:25, Purple:35} },
    "R-99": { body: 11, head: 17, rpm: 1080, mags: {White:20, Blue:24, Purple:27} },
    "Volt": { body: 15, head: 23, rpm: 720, mags: {White:19, Blue:21, Purple:26} },
    "C.A.R": { body: 13, head: 20, rpm: 930, mags: {White:20, Blue:22, Purple:27} },
    "Devotion": { body: 17, head: 26, rpm: 900, mags: {White:36, Blue:40, Purple:44} },
    "L-STAR": { body: 18, head: 27, rpm: 600, mags: {White:24, Blue:26, Purple:28} },
    "Spitfire": { body: 18, head: 27, rpm: 512, mags: {White:35, Blue:40, Purple:45} },
    "Rampage": { body: 26, head: 39, rpm: 360, mags: {White:28, Blue:32, Purple:40} },
    "G7 Scout": { body: 34, head: 54, rpm: 240, mags: {White:10, Blue:12, Purple:15} },
    "30-30 Repeater": { body: 42, head: 74, rpm: 216, mags: {White:6, Blue:8, Purple:10} },
    "Bocek": { body: 60, head: 105, rpm: 60, mags: {White:1, Blue:1, Purple:1} },
    "Charge Rifle": { body: 75, head: 120, rpm: 45, mags: {White:4, Blue:4, Purple:4} },
    "Longbow": { body: 55, head: 97, rpm: 78, mags: {White:6, Blue:8, Purple:10} },
    "Sentinel": { body: 70, head: 140, rpm: 50, mags: {White:4, Blue:5, Purple:6} },
    "Kraber": { body: 145, head: 435, rpm: 30, mags: {White:4, Blue:4, Purple:4} },
    "RE-45 (Energy)": { body: 12, head: 18, rpm: 900, mags: {White:16, Blue:19, Purple:24} },
    "P2020": { body: 18, head: 27, rpm: 420, mags: {White:14, Blue:16, Purple:18} },
    "P2020 Akimbo": { body: 18, head: 27, rpm: 840, mags: {White:14, Blue:16, Purple:18} },
    "Wingman": { body: 45, head: 97, rpm: 156, mags: {White:6, Blue:8, Purple:9} },
    "Triple Take": { body: 69, head: 138, rpm: 72, mags: {White:5, Blue:6, Purple:7} },
    "EVA-8": { body: 63, head: 99, rpm: 120, mags: {White:6, Blue:8, Purple:9} },
    "Mastiff": { body: 104, head: 130, rpm: 66, mags: {White:4, Blue:5, Purple:6} },
    "Mozambique": { body: 45, head: 66, rpm: 132, mags: {White:6, Blue:8, Purple:9} },
    "Mozambique Akimbo": { body: 45, head: 66, rpm: 264, mags: {White:6, Blue:8, Purple:9} },
    "Peacekeeper": { body: 110, head: 165, rpm: 60, mags: {White:5, Blue:6, Purple:7} }
};

function populateDropdowns() {
    const w1 = document.getElementById("weapon1");
    const w2 = document.getElementById("weapon2");
    for (let name in weapons) {
        let opt1 = document.createElement("option");
        let opt2 = document.createElement("option");
        opt1.value = opt2.value = name;
        opt1.text = opt2.text = name;
        w1.add(opt1);
        w2.add(opt2);
    }
    w1.selectedIndex = 0;
    w2.selectedIndex = 1;
    setWeaponStats(1);
    setWeaponStats(2);
}

function setWeaponStats(num) {
    document.getElementById(`mag${num}`).value = "White";
    updateAll();
}

function calculate(weaponName, magColor, hsPercent, accPercent, hp) {
    const w = weapons[weaponName];
    const dmgPerShot = (w.body * (1 - (hsPercent / 100)) + w.head * (hsPercent / 100)) * (accPercent / 100);
    const shotsPerKill = Math.ceil(hp / dmgPerShot);
    const ttk = (shotsPerKill - 1) / (w.rpm / 60);
    const dps = dmgPerShot * (w.rpm / 60);
    const magSize = w.mags[magColor];
    const dmgPerMag = dmgPerShot * magSize;
    const killsPerMag = Math.floor(dmgPerMag / hp);
    return {
        dmgPerShot: dmgPerShot.toFixed(1),
        ttk: ttk.toFixed(2),
        dps: dps.toFixed(1),
        dmgPerMag: dmgPerMag.toFixed(0),
        killsPerMag: killsPerMag,
        shotsPerMag: magSize
    };
}

function updateAll() {
    for (let i = 1; i <= 2; i++) {
        const weapon = document.getElementById(`weapon${i}`).value;
        const mag = document.getElementById(`mag${i}`).value;
        const hs = parseFloat(document.getElementById(`hs${i}`).value) || 0;
        const acc = parseFloat(document.getElementById(`acc${i}`).value) || 100;
        const hp = parseFloat(document.getElementById(`hp${i}`).value) || 200;
        const res = calculate(weapon, mag, hs, acc, hp);
        document.getElementById(`result${i}`).innerHTML = 
            `<span class="${res.killsPerMag >= 1 ? 'green' : 'red'}">
             Schaden pro Schuss: ${res.dmgPerShot}</span><br>
             TTK: ${res.ttk}s<br>
             DPS: ${res.dps}<br>
             Schaden pro Mag: ${res.dmgPerMag}<br>
             Kills pro Mag: ${res.killsPerMag}<br>
             SchÃ¼sse pro Mag: ${res.shotsPerMag}`;
    }
}

populateDropdowns();
</script>
</body>
</html>
