<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weapon Comparison</title>
<link rel="stylesheet" href="style.css">
<style>
.container {
    max-width: 800px;
    margin: auto;
    padding: 20px;
}
.weapon-box {
    background: rgba(0,0,0,0.7);
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 20px;
}
label {
    display: block;
    margin-top: 8px;
    font-weight: bold;
}
select, input {
    width: 100%;
    padding: 8px;
    margin-top: 3px;
    border: none;
    border-radius: 5px;
    font-size: 14px;
}
.result {
    margin-top: 10px;
    padding: 10px;
    background: rgba(255,255,255,0.1);
    border-radius: 5px;
}
.green { color: #00ff88; font-weight: bold; }
.red { color: #ff4444; font-weight: bold; }
</style>
</head>
<body>

<div class="container">
<h1>ðŸ”« Weapon Comparison</h1>

<div class="weapon-box">
    <h2>Waffe 1</h2>
    <label>Waffe:</label>
    <select id="weapon1" onchange="setWeaponStats(1)"></select>

    <label>Magazin:</label>
    <select id="mag1" onchange="updateTTK(1)">
        <option value="White">White</option>
        <option value="Blue">Blue</option>
        <option value="Purple">Purple</option>
    </select>

    <label>Headshot-Anteil (%):</label>
    <input type="number" id="hs1" value="0" onchange="updateTTK(1)">

    <label>Trefferquote (%):</label>
    <input type="number" id="acc1" value="100" onchange="updateTTK(1)">

    <label>Ziel-HP:</label>
    <input type="number" id="hp1" value="200" onchange="updateTTK(1)">

    <div class="result" id="result1">Noch keine Berechnung</div>
</div>

<div class="weapon-box">
    <h2>Waffe 2</h2>
    <label>Waffe:</label>
    <select id="weapon2" onchange="setWeaponStats(2)"></select>

    <label>Magazin:</label>
    <select id="mag2" onchange="updateTTK(2)">
        <option value="White">White</option>
        <option value="Blue">Blue</option>
        <option value="Purple">Purple</option>
    </select>

    <label>Headshot-Anteil (%):</label>
    <input type="number" id="hs2" value="0" onchange="updateTTK(2)">

    <label>Trefferquote (%):</label>
    <input type="number" id="acc2" value="100" onchange="updateTTK(2)">

    <label>Ziel-HP:</label>
    <input type="number" id="hp2" value="200" onchange="updateTTK(2)">

    <div class="result" id="result2">Noch keine Berechnung</div>
</div>
</div>

<script>
const weapons = {
    "Havoc": { body: 18, head: 27, fireRate: 10, mags: {White: 24, Blue: 28, Purple: 32}},
    "Flatline": { body: 18, head: 36, fireRate: 10, mags: {White: 24, Blue: 28, Purple: 30}},
    "Hemlok": { body: 20, head: 35, fireRate: 6.4, mags: {White: 18, Blue: 24, Purple: 27}},
    "R-301": { body: 14, head: 25, fireRate: 13.5, mags: {White: 18, Blue: 20, Purple: 25}},
    "Nemesis": { body: 17, head: 26, fireRate: 7, mags: {White: 20, Blue: 24, Purple: 28}},
    "Alternator": { body: 16, head: 24, fireRate: 11, mags: {White: 19, Blue: 22, Purple: 27}},
    "Prowler": { body: 15, head: 23, fireRate: 9, mags: {White: 20, Blue: 25, Purple: 35}},
    "R-99": { body: 11, head: 17, fireRate: 18, mags: {White: 20, Blue: 24, Purple: 27}},
    "Volt": { body: 15, head: 23, fireRate: 16, mags: {White: 19, Blue: 21, Purple: 26}},
    "C.A.R": { body: 13, head: 20, fireRate: 16.2, mags: {White: 20, Blue: 22, Purple: 27}},
    "Devotion": { body: 17, head: 26, fireRate: 15, mags: {White: 36, Blue: 40, Purple: 44}},
    "L-STAR": { body: 18, head: 27, fireRate: 10, mags: {White: 24, Blue: 26, Purple: 28}},
    "Spitfire": { body: 18, head: 27, fireRate: 8, mags: {White: 35, Blue: 40, Purple: 45}},
    "Rampage": { body: 26, head: 39, fireRate: 6, mags: {White: 28, Blue: 32, Purple: 40}},
    "G7 Scout": { body: 34, head: 54, fireRate: 4, mags: {White: 10, Blue: 12, Purple: 15}},
    "30-30 Repeater": { body: 42, head: 74, fireRate: 3.6, mags: {White: 6, Blue: 8, Purple: 10}},
    "Bocek": { body: 60, head: 105, fireRate: 1, mags: {White: 1, Blue: 1, Purple: 1}},
    "Charge Rifle": { body: 75, head: 120, fireRate: 1, mags: {White: 4, Blue: 4, Purple: 4}},
    "Longbow": { body: 55, head: 97, fireRate: 1.3, mags: {White: 6, Blue: 8, Purple: 10}},
    "Sentinel": { body: 70, head: 140, fireRate: 1, mags: {White: 4, Blue: 5, Purple: 6}},
    "Kraber": { body: 145, head: 435, fireRate: 0.5, mags: {White: 4, Blue: 4, Purple: 4}},
    "RE-45 (Energy)": { body: 12, head: 18, fireRate: 15, mags: {White: 16, Blue: 19, Purple: 24}},
    "P2020": { body: 18, head: 27, fireRate: 7, mags: {White: 14, Blue: 16, Purple: 18}},
    "P2020 Akimbo": { body: 18, head: 27, fireRate: 14, mags: {White: 14, Blue: 16, Purple: 18}},
    "Wingman": { body: 45, head: 97, fireRate: 2.6, mags: {White: 6, Blue: 8, Purple: 9}},
    "Triple Take": { body: 69, head: 138, fireRate: 1.2, mags: {White: 5, Blue: 6, Purple: 7}},
    "EVA-8": { body: 63, head: 99, fireRate: 2, mags: {White: 6, Blue: 8, Purple: 9}},
    "Mastiff": { body: 104, head: 130, fireRate: 1.1, mags: {White: 4, Blue: 5, Purple: 6}},
    "Mozambique": { body: 45, head: 66, fireRate: 2.3, mags: {White: 6, Blue: 8, Purple: 9}},
    "Mozambique Akimbo": { body: 45, head: 66, fireRate: 4.6, mags: {White: 6, Blue: 8, Purple: 9}},
    "Peacekeeper": { body: 110, head: 165, fireRate: 1, mags: {White: 5, Blue: 6, Purple: 7}}
};

function populateDropdowns() {
    const selects = [document.getElementById("weapon1"), document.getElementById("weapon2")];
    for (let sel of selects) {
        sel.innerHTML = "";
        for (let w in weapons) {
            let opt = document.createElement("option");
            opt.value = w;
            opt.textContent = w;
            sel.appendChild(opt);
        }
    }
}

function setWeaponStats(num) {
    document.getElementById(`mag${num}`).value = "White";
    updateTTK(num);
}

function updateTTK(num) {
    const weaponName = document.getElementById(`weapon${num}`).value;
    const data = weapons[weaponName];
    const hsPerc = parseFloat(document.getElementById(`hs${num}`).value) / 100;
    const accPerc = parseFloat(document.getElementById(`acc${num}`).value) / 100;
    const hp = parseInt(document.getElementById(`hp${num}`).value);
    const magSize = data.mags[document.getElementById(`mag${num}`).value];

    const avgDmg = (data.body * (1 - hsPerc) + data.head * hsPerc);
    const adjDmg = avgDmg * accPerc;
    const shotsToKill = Math.ceil(hp / adjDmg);
    const ttk = ((shotsToKill - 1) / data.fireRate).toFixed(2);
    const dmgPerMag = avgDmg * magSize;
    const killsPerMag = Math.floor(dmgPerMag / hp);

    let res = `Schaden pro Schuss: ${avgDmg.toFixed(1)}<br>` +
              `TTK: ${ttk}s<br>` +
              `DPS: ${(avgDmg * data.fireRate).toFixed(1)}<br>` +
              `Schaden pro Mag: ${dmgPerMag.toFixed(0)}<br>` +
              `Kills pro Mag: ${killsPerMag}`;

    document.getElementById(`result${num}`).innerHTML = res;
    document.getElementById(`result${num}`).className = "result " + (killsPerMag >= 1 ? "green" : "red");
}

populateDropdowns();
setWeaponStats(1);
setWeaponStats(2);
</script>

</body>
</html>
