<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weapon Comparison</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: url('Wraith PFP_V4_00000.jpg') no-repeat center center fixed;
    background-size: cover;
    color: white;
    text-align: center;
    margin: 0;
}
.container {
    background: rgba(0,0,0,0.7);
    padding: 20px;
    border-radius: 10px;
    display: inline-block;
    margin-top: 20px;
}
select, input {
    width: 90%;
    padding: 5px;
    margin: 5px 0;
    border: none;
    border-radius: 5px;
}
.result {
    background: black;
    padding: 10px;
    border-radius: 5px;
    text-align: left;
    margin-top: 10px;
}
.green { color: #00ff00; font-weight: bold; }
.red { color: #ff0000; font-weight: bold; }
.yellow { color: #ffff00; font-weight: bold; }
</style>
</head>
<body>

<h1>ðŸ”« Weapon Comparison</h1>

<div class="container">
    <h2>Waffe 1</h2>
    <select id="weapon1" onchange="setWeaponStats(1)"></select>
    <label>Magazin:</label>
    <select id="mag1" onchange="updateAll()">
        <option value="White">White</option>
        <option value="Blue">Blue</option>
        <option value="Purple">Purple</option>
    </select>
    <label>Headshot-Anteil (%):</label>
    <input type="number" id="hs1" value="0">
    <label>Trefferquote (%):</label>
    <input type="number" id="acc1" value="100">
    <label>Ziel-HP:</label>
    <input type="number" id="hp1" value="200">
    <div id="result1" class="result"></div>
</div>

<div class="container">
    <h2>Waffe 2</h2>
    <select id="weapon2" onchange="setWeaponStats(2)"></select>
    <label>Magazin:</label>
    <select id="mag2" onchange="updateAll()">
        <option value="White">White</option>
        <option value="Blue">Blue</option>
        <option value="Purple">Purple</option>
    </select>
    <label>Headshot-Anteil (%):</label>
    <input type="number" id="hs2" value="0">
    <label>Trefferquote (%):</label>
    <input type="number" id="acc2" value="100">
    <label>Ziel-HP:</label>
    <input type="number" id="hp2" value="200">
    <div id="result2" class="result"></div>
</div>

<br><br>
<button onclick="updateAll()">Berechnen</button>

<script>
const weapons = {
    "Flatline": { body: 19, head: 25, rpm: 600, mags: {White:20, Blue:25, Purple:28} },
    "Havoc": { body: 18, head: 24, rpm: 672, mags: {White:24, Blue:28, Purple:32} },
    "R-301": { body: 14, head: 20, rpm: 810, mags: {White:18, Blue:20, Purple:25} },
    "R-99": { body: 12, head: 18, rpm: 1080, mags: {White:20, Blue:22, Purple:27} },
    "CAR": { body: 13, head: 20, rpm: 930, mags: {White:20, Blue:22, Purple:27} },
    "Volt": { body: 15, head: 23, rpm: 720, mags: {White:19, Blue:21, Purple:26} },
    "Alternator": { body: 16, head: 24, rpm: 600, mags: {White:19, Blue:21, Purple:25} },
    "Prowler": { body: 15, head: 23, rpm: 672, mags: {White:35, Blue:35, Purple:35} }
};

function populateDropdowns() {
    const w1 = document.getElementById("weapon1");
    const w2 = document.getElementById("weapon2");
    for (let name in weapons) {
        let opt1 = document.createElement("option");
        let opt2 = document.createElement("option");
        opt1.value = opt2.value = name;
        opt1.text = opt2.text = name;
        w1.add(opt1);
        w2.add(opt2);
    }
    w1.selectedIndex = 0;
    w2.selectedIndex = 1;
    setWeaponStats(1);
    setWeaponStats(2);
}

function setWeaponStats(num) {
    const weapon = document.getElementById(`weapon${num}`).value;
    const mags = weapons[weapon].mags;
    document.getElementById(`mag${num}`).value = "White";
    updateAll();
}

function calculate(weaponName, magColor, hsPercent, accPercent, hp) {
    const w = weapons[weaponName];
    const body = w.body;
    const head = w.head;
    const rpm = w.rpm;
    const magSize = w.mags[magColor];

    const hsMulti = hsPercent / 100;
    const accMulti = accPercent / 100;

    const dmgPerShot = (body * (1 - hsMulti) + head * hsMulti);
    const realDmgPerShot = dmgPerShot * accMulti;
    const dps = realDmgPerShot * (rpm / 60);
    const ttk = (hp / realDmgPerShot) / (rpm / 60);
    const shotsPerKill = Math.ceil(hp / realDmgPerShot);
    const shotsPerMag = magSize;
    const dmgPerMag = shotsPerMag * realDmgPerShot;
    const killsPerMag = Math.floor(dmgPerMag / hp);

    return {
        dmgPerShot: realDmgPerShot.toFixed(1),
        ttk: ttk.toFixed(2),
        dps: dps.toFixed(1),
        dmgPerMag: dmgPerMag.toFixed(0),
        killsPerMag: killsPerMag,
        shotsPerMag: shotsPerMag
    };
}

function updateAll() {
    for (let i = 1; i <= 2; i++) {
        const weapon = document.getElementById(`weapon${i}`).value;
        const mag = document.getElementById(`mag${i}`).value;
        const hs = parseFloat(document.getElementById(`hs${i}`).value) || 0;
        const acc = parseFloat(document.getElementById(`acc${i}`).value) || 100;
        const hp = parseFloat(document.getElementById(`hp${i}`).value) || 200;

        const res = calculate(weapon, mag, hs, acc, hp);
        document.getElementById(`result${i}`).innerHTML = 
            `<span class="green">Schaden pro Schuss: ${res.dmgPerShot}</span><br>
             TTK: ${res.ttk}s<br>
             DPS: ${res.dps}<br>
             Schaden pro Mag: ${res.dmgPerMag}<br>
             Kills pro Mag: ${res.killsPerMag}<br>
             SchÃ¼sse pro Mag: ${res.shotsPerMag}`;
    }
}

populateDropdowns();
</script>
</body>
</html>
